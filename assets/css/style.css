/* 1. paper background */
body::before{content:"";position:fixed;inset:0;
  background:url("../images/paper-fiber-manila.png") repeat;
  opacity:.20;pointer-events:none;z-index:0;}
body{background:#f8f5d7;position:relative;z-index:1;}

/* 2. layout / logo (unchanged) */
.topbar{position:relative;z-index:1;padding:1rem 2rem;min-height:80px;}
.topbar-inner{display:flex;justify-content:space-between;align-items:flex-end;}
.logo{position:absolute;top:0;left:0;width:60px;height:60px;
      display:flex;align-items:center;justify-content:center;
      text-decoration:none;color:inherit;z-index:2;}
.logo span{font-family:'Equity Caps','Georgia',serif;font-size:5rem;font-weight:700;}
.logo::after{content:"";position:absolute;width:45px;height:45px;
  left:calc(70% - 30%);bottom:-30%;background:#7DC8F2;
  transform:scaleX(0);transform-origin:left center;
  transition:transform .3s ease .05s;z-index:1;}
.logo:hover::after,.logo:focus::after{transform:scaleX(1);}
.nav-links{display:flex;gap:2rem;margin-left:auto;margin-top:1.2rem;}
.nav-links a{position:relative;display:inline-block;
  font-family:'Equity Caps','Georgia',serif;font-size:1.25rem;
  letter-spacing:.05em;text-decoration:none;color:inherit;}

/* 3. hover highlight */
.hover-zone{position:relative;display:inline-block;}

.highlight-box{
  position:absolute;bottom:var(--jitter-bottom,0%);
  left:var(--jitter-left,0%);width:var(--jitter-width,100%);
  height:50%;background:#7DC8F2;
  transform:scaleX(0) rotate(var(--jitter-rotate,0deg));
  transform-origin:left center;opacity:0;pointer-events:none;z-index:1;
}

/* wipe-IN */
.highlight-box.wipe-in      {animation:wipeIn .30s ease-out forwards;}
.highlight-box.wipe-in-slow {animation:wipeIn .50s ease-out forwards;}

/* wipe-OUT → dual overlay left→right */
.highlight-box.erase{
  position:relative;
  transform:none !important;          /* <<< keep bar fully extended */
}

.highlight-box.erase::after,
.highlight-box.erase::before{
  content:"";position:absolute;inset:0;pointer-events:none;
  animation:eraserSlide .60s ease-in forwards;
}
.highlight-box.erase::after {background:#f8f5d7;z-index:2;} /* solid tint */
.highlight-box.erase::before{
  background:url("../images/paper-fiber-manila.png") repeat;
  opacity:.20;z-index:3;                                   /* 20 % texture */
}

/* text stays on top */
.hover-zone span:last-of-type{position:relative;z-index:4;}

/* keyframes */
@keyframes wipeIn{
  from{transform:scaleX(0) rotate(var(--jitter-rotate,0deg));opacity:0;}
  to  {transform:scaleX(1) rotate(var(--jitter-rotate,0deg));opacity:1;}
}
@keyframes eraserSlide{
  from{transform:translateX(-100%);}
  to  {transform:translateX(0);}
}

/* 4. mobile tweak */
@media(max-width:600px){
  .topbar{flex-wrap:wrap;gap:.5rem;}
  .nav-links{width:100%;justify-content:flex-end;}
}

/* 5. fonts (unchanged) */
@font-face{font-family:'Equity Text';src:url("../fonts/equity_text_a_regular-webfont.ttf") format("truetype");font-weight:400;font-style:normal;}
@font-face{font-family:'Equity Text';src:url("../fonts/equity_text_a_bold-webfont.ttf") format("truetype");font-weight:700;font-style:normal;}
@font-face{font-family:'Equity Text';src:url("../fonts/equity_text_a_italic-webfont.ttf") format("truetype");font-weight:400;font-style:italic;}
@font-face{font-family:'Equity Text';src:url("../fonts/equity_text_a_bold_italic-webfont.ttf") format("truetype");font-weight:700;font-style:italic;}
@font-face{font-family:'Equity Caps';src:url("../fonts/equity_caps_a_regular-webfont.ttf") format("truetype");font-weight:400;font-style:normal;}
@font-face{font-family:'Equity Caps';src:url("../fonts/equity_caps_a_bold-webfont.ttf") format("truetype");font-weight:700;font-style:normal;}

/* ───────────────────────────────────────────────
   TEMPORARY DIAGNOSTICS – add at the *end*
   Remove when you find the cause
─────────────────────────────────────────────── */

/* 1️⃣  Paint the overlay BRIGHT MAGENTA + 3 px outline */
.highlight-box.erase::after{
  background:#ff00ff !important;                 /* solid magenta */
  outline:3px solid red !important;              /* thick border  */
}
.highlight-box.erase::before{
  background:#00ffff !important;                 /* cyan texture  */
  opacity:.4 !important;                         /* very visible  */
  outline:3px solid red !important;
}

/* 2️⃣  Freeze the blue bar at full width while .erase is on */
.highlight-box.erase{
  transform:none !important;                     /* bar never collapses */
}

/* 3️⃣  Make .erase itself draw a border so you can see the box
       even if pseudo-elements somehow fail */
.highlight-box.erase{
  outline:3px dashed #ff00ff !important;
  outline-offset:2px !important;
}

/* 4️⃣  Slow the overlay W-A-Y down so you can follow it */
@keyframes eraserSlide{
  from{transform:translateX(-100%);}
  to  {transform:translateX(0);}
}
.highlight-box.erase::after,
.highlight-box.erase::before{
  animation:eraserSlide 3s linear forwards !important;  /* 3 seconds */
}

