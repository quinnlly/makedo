/* ──────────────────────────────────────────────────────────
   Global paper texture overlay
────────────────────────────────────────────────────────── */
body::before{
  content:"";
  position:fixed;
  inset:0;
  background:url('../images/paper-fiber-manila.png') repeat;
  opacity:.20;
  pointer-events:none;
  z-index:0;
}
body{
  background:#f8f5d7;
  position:relative;
  z-index:1;
}

/* ──────────────────────────────────────────────────────────
   Top bar & layout
────────────────────────────────────────────────────────── */
.topbar{
  position:relative;
  z-index:1;
  padding:1rem 2rem;
  background:transparent;
  min-height:80px;
}
.topbar-inner{
  display:flex;
  justify-content:space-between;
  align-items:flex-end;
}
.logo{
  position:absolute;
  top:0;left:0;
  width:60px;height:60px;
  display:flex;align-items:center;justify-content:center;
  text-decoration:none;color:inherit;
  z-index:2;
}
.logo span{
  font-family:'Equity Caps','Georgia',serif;
  font-weight:700;
  font-size:5rem;
  line-height:1;
  z-index:2;
}
.logo::after{
  content:"";
  position:absolute;
  width:45px;height:45px;
  background:#7DC8F2;
  left:calc(70% - 30%);
  bottom:-30%;
  transform:scaleX(0);
  transform-origin:left center;
  transition:transform .3s ease-out .05s;
  z-index:1;
}
.logo:hover::after,
.logo:focus::after{transform:scaleX(1);}

.nav-links{
  display:flex;
  gap:2rem;
  margin-left:auto;
  margin-top:1.2rem;
}
.nav-links a{
  position:relative;
  display:inline-block;
  font-family:'Equity Caps','Georgia',serif;
  font-size:1.25rem;
  letter-spacing:.05em;
  text-decoration:none;
  color:inherit;
}

/* ──────────────────────────────────────────────────────────
   Hover-highlight (blue bar + paper eraser)
────────────────────────────────────────────────────────── */
.hover-zone{position:relative;display:inline-block;overflow:visible;}

.highlight-box{
  position:absolute;
  bottom:var(--jitter-bottom,0%);
  left:var(--jitter-left,0%);
  width:var(--jitter-width,100%);
  height:50%;
  background:#7DC8F2;
  transform:scaleX(0) rotate(var(--jitter-rotate,0deg));
  transform-origin:left center;
  opacity:0;                      /* becomes 1 during wipeIn */
  pointer-events:none;
  z-index:1;
}

/* wipe-IN */
.highlight-box.wipe-in      {animation:wipeIn .28s ease-out forwards;}
.highlight-box.wipe-in-slow {animation:wipeIn .45s ease-out forwards;}

/* wipe-OUT via internal paper overlay */
.highlight-box.erase::after{
  content:"";
  position:absolute;
  inset:0;
  background:#f8f5d7;
  background-image:url('../images/paper-fiber-manila.png');
  background-repeat:repeat;
  animation:eraserSlide .38s ease-in forwards;
  pointer-events:none;
  z-index:2;
}

/* keep link text above everything */
.hover-zone span:last-of-type{position:relative;z-index:3;}

/* keyframes */
@keyframes wipeIn{
  from{transform:scaleX(0) rotate(var(--jitter-rotate,0deg));opacity:0;}
  to  {transform:scaleX(1) rotate(var(--jitter-rotate,0deg));opacity:1;}
}
@keyframes eraserSlide{
  from{transform:translateX(-100%);}
  to  {transform:translateX(0);}
}

/* ──────────────────────────────────────────────────────────
   Mobile tweak
────────────────────────────────────────────────────────── */
@media(max-width:600px){
  .topbar{flex-wrap:wrap;gap:.5rem;}
  .nav-links{width:100%;justify-content:flex-end;}
}

/* ──────────────────────────────────────────────────────────
   Equity font faces
────────────────────────────────────────────────────────── */
@font-face{font-family:'Equity Text';src:url('../fonts/equity_text_a_regular-webfont.ttf') format('truetype');font-weight:400;font-style:normal;}
@font-face{font-family:'Equity Text';src:url('../fonts/equity_text_a_bold-webfont.ttf') format('truetype');font-weight:700;font-style:normal;}
@font-face{font-family:'Equity Text';src:url('../fonts/equity_text_a_italic-webfont.ttf') format('truetype');font-weight:400;font-style:italic;}
@font-face{font-family:'Equity Text';src:url('../fonts/equity_text_a_bold_italic-webfont.ttf') format('truetype');font-weight:700;font-style:italic;}
@font-face{font-family:'Equity Caps';src:url('../fonts/equity_caps_a_regular-webfont.ttf') format('truetype');font-weight:400;font-style:normal;}
@font-face{font-family:'Equity Caps';src:url('../fonts/equity_caps_a_bold-webfont.ttf') format('truetype');font-weight:700;font-style:normal;}
